#version 150
in vec2 v_texcoord;
out vec4 fragColor;

uniform sampler2D texY;
uniform sampler2D texU;
uniform sampler2D texV;

uniform vec2 texSizeY;
uniform vec2 texSizeU;
uniform vec2 texSizeV;

uniform mat3 yuv2rgb;

void main() {
    vec2 uvY = v_texcoord * texSizeY;
    vec2 uvU = v_texcoord * texSizeU;
    vec2 uvV = v_texcoord * texSizeV;

    float y = texture(texY, uvY).r;
    float u = texture(texU, uvU).r - 0.5;
    float v = texture(texV, uvV).r - 0.5;

    vec3 rgb = yuv2rgb * vec3(y, u, v);
    fragColor = vec4(rgb, 1.0);
}
